{% extends 'store/layouts/main.html' %}
{% load static %}
{% block content %}

<style>
  :root {
    --primary: #6c63ff;
    --accent: #ff6b6b;
    --success: #28a745;
    --danger: #dc3545;
    --light-gray: #f7f8fc;
    --text-dark: #222;
    --text-muted: #666;
    --white: #ffffff;
  }

  .breadcrumb-bar {
    background: var(--primary);
    padding: 0.75rem 0;
    width: 100%;
  }

  .breadcrumb-bar a {
    color: #fff;
    font-weight: 500;
    text-decoration: none;
    margin-right: 5px;
    transition: 0.3s;
  }

  .breadcrumb-bar a:hover {
    text-decoration: underline;
    color: var(--accent);
  }

  .product {
    border-radius: 18px;
    overflow: hidden;
    background: var(--white);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.08);
  }

  .product-image {
    width: 100%;
    height: 350px;
    object-fit: cover;
    border-radius: 12px;
  }

  .product-viewtag {
    background-color: #ffc107;
    color: #000;
    padding: 5px 10px;
    border-radius: 6px;
    font-weight: bold;
    position: absolute;
    top: 15px;
    left: 15px;
    z-index: 2;
    font-size: 0.85rem;
  }

  .trending_tag {
    background-color: var(--danger);
    color: white;
    padding: 5px 12px;
    border-radius: 20px;
    font-size: 0.9rem;
    margin-left: 10px;
  }

  .badge-bg-success,
  .badge-bg-danger {
    display: inline-block;
    padding: 6px 14px;
    border-radius: 20px;
    font-weight: 500;
    font-size: 0.9rem;
    margin-bottom: 10px;
  }

  .badge-bg-success {
    background-color: var(--success);
    color: white;
  }

  .badge-bg-danger {
    background-color: var(--danger);
    color: white;
  }

  .price-label {
    font-size: 1rem;
    font-weight: 500;
    margin-right: 1rem;
  }

  .price-label s {
    color: var(--text-muted);
  }

  .price-sale {
    font-weight: bold;
    color: var(--accent);
  }

  .qty-input-group {
    display: flex;
    width: fit-content;
    border: 1px solid #ccc;
    border-radius: 8px;
    overflow: hidden;
  }

  .qty-input-group input {
    width: 50px;
    text-align: center;
    border: none;
    outline: none;
  }

  .qty-input-group button {
    background-color: var(--light-gray);
    border: none;
    padding: 6px 12px;
    font-weight: bold;
    cursor: pointer;
  }

  .btn {
    border-radius: 30px !important;
    transition: all 0.3s ease;
  }

  .btn i {
    margin-left: 6px;
  }

  .btn:hover {
    opacity: 0.9;
  }

  @media (max-width: 768px) {
    .product-image {
      height: 280px;
    }
  }
</style>

<!-- Breadcrumb -->
<div class="breadcrumb-bar">
  <div class="container">
    <a href="{% url 'home' %}">Home /</a>
    <a href="{% url 'collections' %}">Collections /</a>
    <a href="{% url 'collectionsview' product.category.slug %}">{{ product.category.name }} /</a>
    <a href="{% url 'productview' product.category.slug product.slug %}">{{ product.name }}</a>
  </div>
</div>

<!-- Product Card -->
<div class="py-5">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="card product">
          <div class="card-body">
            <div class="row align-items-start">
              <!-- Left: Product Image -->
              <div class="col-md-4 position-relative">
                {% if product.tag %}
                <span class="product-viewtag">{{ product.tag }}</span>
                {% endif %}
                {% if product.product_image %}
                <img src="{{ product.product_image.url }}" alt="{{ product.name }}" class="product-image" />
                {% else %}
                <img src="{% static 'images/default-product.jpg' %}" alt="No image" class="product-image" />
                {% endif %}
              </div>

              <!-- Right: Product Info -->
              <div class="col-md-8">
                <h2 class="fw-bold">
                  {{ product.name }}
                  {% if product.trending %}
                  <span class="trending_tag">Trending</span>
                  {% endif %}
                </h2>

                <hr />

                <div class="mb-2">
                  <span class="price-label">Original: <s>${{ product.original_price|floatformat:2 }}</s></span>
                  <span class="price-label price-sale">Now: ${{ product.selling_price|floatformat:2 }}</span>
                </div>

                <p class="text-muted mt-3">{{ product.small_description }}</p>

                {% if product.quantity > 0 %}
                <span class="badge-bg-success">In Stock</span>
                {% else %}
                <span class="badge-bg-danger">Out of Stock</span>
                {% endif %}

                <div class="mt-3">
                  <label for="Quantity" class="form-label">Quantity</label>
                  <div class="product_data">
                    {% csrf_token %}
                    <input type="hidden" value="{{ product.id }}" class="prod_id" />

                    <div class="qty-input-group mb-3">
                      <button class="decrement-btn">-</button>
                      <input type="text" name="quantity" class="qty-input" value="1" />
                      <button class="increment-btn">+</button>
                    </div>

                    {% if product.quantity > 0 %}
                    <button type="button" class="btn btn-primary me-2 addToCartBtn">
                      Add to Cart <i class="fa fa-shopping-cart"></i>
                    </button>
                    {% endif %}
                    <button type="button" class="btn btn-success addToWishlist">
                      Wishlist <i class="fa fa-heart"></i>
                    </button>
                  </div>
                </div>
              </div>

              <!-- Full Width: Description -->
              <div class="col-md-12 mt-4">
                <hr />
                <h4>Description</h4>
                <p class="mt-2">{{ product.description }}</p>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}
